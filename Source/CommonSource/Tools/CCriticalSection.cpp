/*-----------------------------------------------------------------------------
Autor                  Datum
E. Fitze               14.06.2013

-- BESCHREIBUNG ---------------------------------------------------------------


-- AENDERUNGEN ----------------------------------------------------------------

Autor                  Datum

-----------------------------------------------------------------------------*/
#include "CCriticalSection.h"


using namespace Tools;
//-----------------------------------------------------------------------------




// Construction / Destruction
//-----------------------------------------------------------------------------
CCriticalSection::CCriticalSection()
: m_isLocked(0)
//-----------------------------------------------------------------------------
{
   _mutex_init(&m_cs, NULL);
}

//-----------------------------------------------------------------------------
CCriticalSection::~CCriticalSection()
//-----------------------------------------------------------------------------
{
   if (m_isLocked)
   {
      _mutex_unlock(&m_cs);
   }
}


//-----------------------------------------------------------------------------
void CCriticalSection::Lock()
//-----------------------------------------------------------------------------
{
   _mutex_lock(&m_cs);
   m_isLocked = TRUE;
}

//-----------------------------------------------------------------------------
void CCriticalSection::Unlock()
//-----------------------------------------------------------------------------
{
   _mutex_unlock(&m_cs);
   m_isLocked = FALSE;
}

